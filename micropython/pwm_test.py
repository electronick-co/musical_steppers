# Example using PWM to fade an LED.

import time
from machine import Pin, PWM

# Construct PWM object, with LED on Pin(25).
pwm1 = PWM(Pin(17))
pwm2 = PWM(Pin(19))
# Set the PWM frequency.

# List of frequency per notes. first note is 21 in midi, A0 in musical notation.
base_note = 21
notes = [28, 29, 31, 33, 35, 37, 39, 41, 44, 46, 49, 52, 55, 58, 62, 65, 69, 73, 78, 82, 87, 92, 98, 104, 110, 117, 123, 131, 139, 147, 156, 165, 175, 185, 196, 208, 220, 233, 247, 262, 277, 294, 311, 330, 349, 370, 392, 415, 440, 466, 494, 523, 554, 587, 622, 659, 698, 740, 784, 831, 880, 932, 988, 1047, 1109, 1175, 1245, 1319, 1397, 1480, 1568, 1661, 1760, 1865, 1976, 2093, 2217, 2349, 2489, 2637, 2794, 2960, 3136, 3322, 3520, 3729, 3951]


#song = [(0, 64), (74, 64), (76, 64), (77, 64), (79, 64), (81, 64), (83, 64), (84, 64), (72, 32), (74, 32), (76, 32), (77, 32), (79, 32), (81, 32), (83, 32), (84, 32), (72, 32), (73, 32), (74, 32), (75, 32), (76, 32), (77, 32), (78, 32), (79, 32), (80, 32), (81, 32), (82, 32), (83, 32), (84, 32), (72, 64), (74, 192)]

song = [[0.35, 1, 64, 1, 63], [0.58, 1, 0, 0, 0], [0.35, 1, 0, 1, 70], [0.58, 1, 0, 0, 0], [0.35, 1, 64, 1, 63], [1.03, 1, 0, 0, 0], [0.35, 1, 0, 0, 0], [0.35, 1, 64, 0, 0], [0.23, 1, 0, 0, 0], [0.46, 1, 70, 0, 0], [0.35, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 62, 0, 0], [0.23, 1, 0, 1, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 0, 1, 70], [1.04, 1, 71, 1, 0], [0.12, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.23, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 0, 1, 63], [0.35, 1, 72, 0, 0], [0.58, 1, 0, 0, 0], [0.35, 1, 0, 1, 70], [0.58, 1, 0, 0, 0], [0.35, 1, 72, 1, 63], [1.04, 1, 0, 0, 0], [0.35, 1, 0, 0, 0], [0.35, 1, 72, 0, 0], [0.23, 1, 0, 0, 0], [0.46, 1, 70, 0, 0], [0.35, 1, 0, 0, 0], [0.23, 1, 67, 0, 0], [0.12, 1, 62, 0, 0], [0.23, 1, 0, 1, 0], [0.23, 1, 67, 0, 0], [0.12, 1, 0, 1, 70], [1.04, 1, 67, 1, 0], [0.12, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.23, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 0, 1, 63], [0.35, 1, 64, 0, 0], [0.58, 1, 0, 0, 0], [0.35, 1, 0, 1, 70], [0.58, 1, 0, 0, 0], [0.35, 1, 64, 1, 63], [1.03, 1, 0, 0, 0], [0.35, 1, 0, 0, 0], [0.35, 1, 64, 0, 0], [0.23, 1, 0, 0, 0], [0.46, 1, 70, 0, 0], [0.35, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 62, 0, 0], [0.23, 1, 0, 1, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 0, 1, 70], [1.04, 1, 71, 1, 0], [0.12, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.23, 1, 0, 0, 0], [0.23, 1, 71, 0, 0], [0.12, 1, 0, 1, 63], [0.35, 1, 72, 0, 0], [0.58, 1, 0, 0, 0], [0.35, 1, 0, 1, 70], [0.58, 1, 0, 0, 0], [0.35, 1, 72, 1, 63], [1.04, 1, 0, 0, 0], [0.35, 1, 0, 0, 0], [0.35, 1, 72, 0, 0], [0.23, 1, 0, 0, 0], [0.46, 1, 70, 0, 0], [0.35, 1, 0, 0, 0], [0.23, 1, 67, 0, 0], [0.12, 1, 62, 0, 0], [0.23, 1, 0, 1, 0], [0.23, 1, 67, 0, 0], [0.12, 1, 0, 1, 70]]

duty = 0
direction = 1
i = 1
for n in song:
    try:
        if n[1] and n[2] > 0:
            pwm1.freq(notes[n[2]-base_note])
            pwm1.duty_u16(0x00FF)
        elif n[2] == 0:
            pwm1.duty_u16(0x0000)
        if n[3] and n[4] > 0:
            pwm2.freq(notes[n[4]-base_note])
            pwm2.duty_u16(0x00FF)
        elif n[4] == 0:
            pwm2.duty_u16(0x0000)
        
        
        time.sleep(n[0])
        print(i)
        i=i+1
    except:
        pass

pwm1.duty_u16(0)
pwm2.duty_u16(0)